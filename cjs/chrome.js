"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(exports,{historyVideoIds:function(){return l},shortsVideoIdsByChannelId:function(){return a},watchLaterVideoIds:function(){return s}});const e=require("selenium-webdriver"),t=require("jnu-web"),r=e=>{let t=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(?:embed\/)?(?:v\/)?(?:shorts\/)?(?:live\/)?(?:@[\w.-]+\/)?(?:video\/)?(?:playlist\?list=)?([a-zA-Z0-9_-]{11})/);return t?t[1]:null},o=async(e,{email:r="",userDataDir:o="",headless:i=!0})=>{let s=new t.Chrome({headless:!!i,email:r,userDataDir:o,arguments:["--no-sandbox","--disable-dev-shm-usage","--disable-gpu","--window-size=1920,1080"]});try{return await s.goto(e),await s.getFullSize(),s}catch(e){throw console.error("Chrome 초기화 중 오류 발생:",e),await s.close(),e}},i=async(t="",r="",{email:i="",userDataDir:s="",headless:l=!1})=>{let a;try{let n=(a=await o(t,{email:i,userDataDir:s,headless:l})).driver,u=await n.findElements(e.By.css(r));return{chrome:a,elements:u}}catch(e){throw a&&await a.close(),e}},s=async(t="")=>{let o=`${t}@gmail.com`,{chrome:s,elements:l}=await i("https://www.youtube.com/playlist?list=WL","ytd-playlist-video-renderer",{email:o});console.log(l,l.length);let a=[];for(let t of l){let r=await t.findElement(e.By.css("#video-title")),o=await r.getAttribute("href");o&&a.push({videoUrl:o})}return s.close(),a.map(e=>r(e.videoUrl))},l=async(t="")=>{let o=`${t}@gmail.com`,{chrome:s,elements:l}=await i("https://www.youtube.com/feed/history","ytd-video-renderer",{email:o});console.log(l,l.length);let a=[];for(let t of l){let r=await t.findElement(e.By.css("#video-title")),o=await r.getAttribute("href");o&&a.push({videoUrl:o})}return s.close(),a.map(e=>r(e.videoUrl))},a=async(t="UCUpJs89fSBXNolQGOYKn0YQ")=>{let{chrome:o,elements:s}=await i(`https://www.youtube.com/channel/${t}/shorts`,"ytd-rich-item-renderer",{}),l=[];for(let t of s){let r=t.findElement(e.By.css("a")),o=await r.getAttribute("href");o&&l.push({videoUrl:o})}return o.close(),l.map(e=>r(e.videoUrl))};