import{By as e}from"selenium-webdriver";import{Chrome as t}from"jnu-web";let o=e=>{let t=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(?:embed\/)?(?:v\/)?(?:shorts\/)?(?:live\/)?(?:@[\w.-]+\/)?(?:video\/)?(?:playlist\?list=)?([a-zA-Z0-9_-]{11})/);return t?t[1]:null},l=async(e,{email:o="",userDataDir:l="",headless:r=!0})=>{let a=new t({headless:!!r,email:o,userDataDir:l,arguments:["--no-sandbox","--disable-dev-shm-usage","--disable-gpu","--window-size=1920,1080"]});try{return await a.goto(e),await a.getFullSize(),a}catch(e){throw console.error("Chrome 초기화 중 오류 발생:",e),await a.close(),e}},r=async(t="",o="",{email:r="",userDataDir:a="",headless:i=!1})=>{let s;try{let n=(s=await l(t,{email:r,userDataDir:a,headless:i})).driver,w=await n.findElements(e.css(o));return{chrome:s,elements:w}}catch(e){throw s&&await s.close(),e}},a=async(t="")=>{let l=`${t}@gmail.com`,{chrome:a,elements:i}=await r("https://www.youtube.com/playlist?list=WL","ytd-playlist-video-renderer",{email:l});console.log(i,i.length);let s=[];for(let t of i){let o=await t.findElement(e.css("#video-title")),l=await o.getAttribute("href");l&&s.push({videoUrl:l})}return a.close(),s.map(e=>o(e.videoUrl))},i=async(t="")=>{let l=`${t}@gmail.com`,{chrome:a,elements:i}=await r("https://www.youtube.com/feed/history","ytd-video-renderer",{email:l});console.log(i,i.length);let s=[];for(let t of i){let o=await t.findElement(e.css("#video-title")),l=await o.getAttribute("href");l&&s.push({videoUrl:l})}return a.close(),s.map(e=>o(e.videoUrl))},s=async(t="UCUpJs89fSBXNolQGOYKn0YQ")=>{let{chrome:l,elements:a}=await r(`https://www.youtube.com/channel/${t}/shorts`,"ytd-rich-item-renderer",{}),i=[];for(let t of a){let o=t.findElement(e.css("a")),l=await o.getAttribute("href");l&&i.push({videoUrl:l})}return l.close(),i.map(e=>o(e.videoUrl))};export{a as watchLaterVideoIds,i as historyVideoIds,s as shortsVideoIdsByChannelId};